<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <script>
      function createTweet(tweet){
        var $tweet = $('<div class="tweet"></div>');
        var $user = $('<h3 class="user"></h3>');
        var $message = $('<p class="message"></p>');
        var $timestamp = $('<footer class="timestamp"></footer>');
        $user.text('@' + tweet.user);
        $user.data('name', tweet.user);
        $message.text(tweet.message);
        $timestamp.text(tweet.created_at);

        $tweet.append($user);
        $tweet.append($message);          
        $tweet.append($timestamp);
        return $tweet;
      };

      $(document).ready(function(){
        var $body = $('body');

        var index = streams.home.length - 1;
        var last = index+1;

        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = createTweet(tweet);
          $tweet.appendTo($body);
          index -= 1;
        }
        $('button').on('click', function(){
          var index = last;
          last = streams.home.length;
          while(index < last){
            var $tweet = createTweet(streams.home[index]);
            $('button').after($tweet);
            index += 1;
          }
        });
      });

    </script>
   <button type='button'>Show new tweets</button> 

  </body>
</html>
